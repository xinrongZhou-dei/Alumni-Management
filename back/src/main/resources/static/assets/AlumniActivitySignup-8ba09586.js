import{_ as L,a as M,r as _,c as k,o as V,d as l,e as E,p as F,w as n,b as O,g as e,h as P,i as R,j as g,k as y,t as c}from"./index-fee6fb78.js";const Y={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-top":"16px"}},q={__name:"AlumniActivitySignup",setup(G){const x=M(),A=()=>{x.push("/")},S=_([]),d=_(1),v=_(10),o=_(0),m=_([]),C=k(()=>o.value===0?0:(d.value-1)*v.value+1),T=k(()=>Math.min(d.value*v.value,o.value)),D=async()=>{try{const t=await O.get("/api/activity/list",{params:{page:d.value,size:v.value}});if(t.data&&t.data.code===0){const a={即将结束:0,进行中:1,未开始:2,已结束:3},u=(t.data.data||[]).slice().sort((r,p)=>{const i=a[r.signupStatus]??99,f=a[p.signupStatus]??99;if(i!==f)return i-f;const h=new Date(r.activityDate).getTime(),w=new Date(p.activityDate).getTime();return h-w});S.value=u,o.value=t.data.total||u.length,m.value=u}else S.value=[],m.value=[],o.value=0}catch{S.value=[],m.value=[],o.value=0}};function b(t){if(!t)return"";const a=new Date(t);if(isNaN(a.getTime()))return"";const u=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),p=String(a.getDate()).padStart(2,"0");return`${u}-${r}-${p}`}const z=t=>{sessionStorage.setItem("activity_detail_from","list"),x.push(`/alumni/activity-detail/${t.uuid}`)},N=t=>{d.value=t,D()},$=t=>t.signupStatus==="报名人数已满"?"danger":t.signupStatus==="进行中"?"success":t.signupStatus==="未开始"?"info":t.signupStatus==="即将结束"?"warning":"danger",B=t=>t.signupStatus==="报名人数已满"?"报名人数已满":t.signupStatus;return V(()=>{D()}),(t,a)=>{const u=l("el-icon"),r=l("el-button"),p=l("el-divider"),i=l("el-table-column"),f=l("el-tag"),h=l("el-space"),w=l("el-table"),I=l("el-pagination"),j=l("el-card");return E(),F(j,{class:"activity-manage-root",shadow:"hover"},{default:n(()=>[e(r,{type:"text",onClick:A,class:"back-btn"},{default:n(()=>[e(u,{style:{"vertical-align":"middle","margin-right":"4px"}},{default:n(()=>[e(P(R))]),_:1}),a[0]||(a[0]=g("返回"))]),_:1,__:[0]}),a[2]||(a[2]=y("div",{class:"activity-manage-header-flex"},[y("h2",{class:"activity-manage-title"},"活动报名")],-1)),e(p),e(w,{data:m.value,border:"",stripe:"",class:"activity-table"},{default:n(()=>[e(i,{prop:"name",label:"活动名称","min-width":"140"}),e(i,{prop:"activityDate",label:"活动时间","min-width":"120"},{default:n(s=>[g(c(b(s.row.activityDate)),1)]),_:1}),e(i,{label:"报名起止时间","min-width":"180"},{default:n(s=>[g(c(b(s.row.signupStart))+" ~ "+c(b(s.row.signupEnd)),1)]),_:1}),e(i,{prop:"signupTotal",label:"报名人数","min-width":"100"}),e(i,{prop:"signupActual",label:"已报名人数","min-width":"100"}),e(i,{prop:"signupStatus",label:"报名状态","min-width":"110"},{default:n(s=>[e(f,{type:$(s.row),effect:"light",round:""},{default:n(()=>[g(c(B(s.row)),1)]),_:2},1032,["type"])]),_:1}),e(i,{label:"操作","min-width":"200"},{default:n(s=>[e(h,null,{default:n(()=>[e(r,{type:"primary",size:"small",onClick:H=>z(s.row)},{default:n(()=>a[1]||(a[1]=[g("查看")])),_:2,__:[1]},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),y("div",Y,[y("div",null," 显示第"+c(C.value)+"到"+c(T.value)+"条，共"+c(o.value)+"条记录 ",1),e(I,{background:"",layout:"prev, pager, next, jumper","current-page":d.value,"page-size":v.value,total:o.value,onCurrentChange:N,style:{"margin-right":"8px"}},null,8,["current-page","page-size","total"])])]),_:1,__:[2]})}}},K=L(q,[["__scopeId","data-v-76bc3008"]]);export{K as default};
